{% extends 'base.html' %}
{% load static %}

 <style>
	.image-zoom-container {
		overflow: hidden;
		position: relative;
	}
	
	.image-zoom-container img {
		transition: transform 0.3s ease-in-out;
		transform-origin: 50% 50%;
	}
	
	{% comment %} .image-zoom-container:hover img {
		transform: scale(1.1);
	} {% endcomment %}
	
</style> 
	<!-- aleartyfy js-->
	<!-- CSS -->
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
	<!-- Default theme -->
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>




{% block content %}



    <section class="ftco-section">
    	<div class="container">
    		<div class="row">

				<div class="col-lg-6 mb-5">
					<div class="image-zoom-container">
						<a href="#">
							<img src="{{ single_product.images.url }}" id="product-image" class="img-fluid" alt="Colorlib Template">
						</a>
					</div>
				</div>
				
    			<div class="col-lg-6 product-details pl-md-5 ftco-animate">
				<form action="{% url 'add_to_cart' single_product.id %}" method="POST">
						{% csrf_token %} 
    				<h3>{{ single_product.product_name }}</h3><br>
    	
    				<h4> â‚¹ {{ single_product.product_price}} </h4><br>
    				<p>{{ single_product.product_name }} {{ single_product.description }}</p><br>

					<div id="stock-status"></div>
						<p style="color: #000;" id="colour-status"></p>
						<p id="colour-stock"> Colours available</p>

					<div class="col-md-6">
						<div class="form-group d-flex">
							<div class="select-wrap">
								<div class="icon"><span class="fas fa-arrow-down"></span></div>
								<select name="colour" id="colour-select" class="form-control" required>
									<option value="">Select a Colour</option>
									{% for col in colour %}
										<option value="{{ col.id }}" data-image="{{ col.variant_image.url }}">{{ col.product_colour | capfirst }}</option>
									{% endfor %}
								</select>
							</div>
						</div>
						
						</div>
					<br>
					<br>
					<div class="row align-items-end">
						<div class="col-md-6">
							<input type="submit" style="display: block; width: 100%; padding: 15px; text-align: center; background-color: #FFD700; border: none; color: white; font-size: 18px; border-radius: 8px;" name="action" value="Add to Wishlist">
						</div>
						<div class="col-md-6">
							<input type="submit" style="display: block; width: 100%; padding: 15px; text-align: center; background-color: orange; border: none; color: white; font-size: 18px; border-radius: 8px;" id="add-to-cart-btn" value="Add to Cart">
						</div>
						
					</div>
		
			</form>
			
			{% comment %} <form action="{% url 'add_to_cart' single_product.id %}" method="post">
				{% csrf_token %}
				<input type="hidden" name="action" value="Add to Cart">
				<input type="hidden" name="colour_id" id="selected-colour-id" value="">
				<div class="col-md-6">
					<input type="submit" style="display: block; width: 100%; padding: 15px; text-align: center; background-color: orange; border: none; color: white; font-size: 18px; border-radius: 8px;" id="add-to-cart-btn" value="Add to Cart">
				</div>
			</form> {% endcomment %}
          	</div>
    			</div>
    		</div>
			
    	</div>
    </section>
	<div class="row px-xl-5">
		<div class="col">
			<div class="bg-light p-30">
				<div class="nav nav-tabs mb-4">
					<a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">Description</a>
					<a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-2">Information</a>
					<a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-3">Reviews (0)</a>
				</div>
				<div class="tab-content">
					<div class="tab-pane fade show active" id="tab-pane-1">
						<h4 class="mb-3">Product Description</h4>
						<p>Eos no lorem eirmod diam diam, eos elitr et gubergren diam sea. Consetetur vero aliquyam invidunt duo dolores et duo sit. Vero diam ea vero et dolore rebum, dolor rebum eirmod consetetur invidunt sed sed et, lorem duo et eos elitr, sadipscing kasd ipsum rebum diam. Dolore diam stet rebum sed tempor kasd eirmod. Takimata kasd ipsum accusam sadipscing, eos dolores sit no ut diam consetetur duo justo est, sit sanctus diam tempor aliquyam eirmod nonumy rebum dolor accusam, ipsum kasd eos consetetur at sit rebum, diam kasd invidunt tempor lorem, ipsum lorem elitr sanctus eirmod takimata dolor ea invidunt.</p>
						<p>Dolore magna est eirmod sanctus dolor, amet diam et eirmod et ipsum. Amet dolore tempor consetetur sed lorem dolor sit lorem tempor. Gubergren amet amet labore sadipscing clita clita diam clita. Sea amet et sed ipsum lorem elitr et, amet et labore voluptua sit rebum. Ea erat sed et diam takimata sed justo. Magna takimata justo et amet magna et.</p>
					</div>
					<div class="tab-pane fade" id="tab-pane-2">
						<h4 class="mb-3">Additional Information</h4>
						<p>Eos no lorem eirmod diam diam, eos elitr et gubergren diam sea. Consetetur vero aliquyam invidunt duo dolores et duo sit. Vero diam ea vero et dolore rebum, dolor rebum eirmod consetetur invidunt sed sed et, lorem duo et eos elitr, sadipscing kasd ipsum rebum diam. Dolore diam stet rebum sed tempor kasd eirmod. Takimata kasd ipsum accusam sadipscing, eos dolores sit no ut diam consetetur duo justo est, sit sanctus diam tempor aliquyam eirmod nonumy rebum dolor accusam, ipsum kasd eos consetetur at sit rebum, diam kasd invidunt tempor lorem, ipsum lorem elitr sanctus eirmod takimata dolor ea invidunt.</p>
						<div class="row">
							<div class="col-md-6">
								<ul class="list-group list-group-flush">
									<li class="list-group-item px-0">
										Sit erat duo lorem duo ea consetetur, et eirmod takimata.
									</li>
									<li class="list-group-item px-0">
										Amet kasd gubergren sit sanctus et lorem eos sadipscing at.
									</li>
									<li class="list-group-item px-0">
										Duo amet accusam eirmod nonumy stet et et stet eirmod.
									</li>
									<li class="list-group-item px-0">
										Takimata ea clita labore amet ipsum erat justo voluptua. Nonumy.
									</li>
								  </ul> 
							</div>
							<div class="col-md-6">
								<ul class="list-group list-group-flush">
									<li class="list-group-item px-0">
										Sit erat duo lorem duo ea consetetur, et eirmod takimata.
									</li>
									<li class="list-group-item px-0">
										Amet kasd gubergren sit sanctus et lorem eos sadipscing at.
									</li>
									<li class="list-group-item px-0">
										Duo amet accusam eirmod nonumy stet et et stet eirmod.
									</li>
									<li class="list-group-item px-0">
										Takimata ea clita labore amet ipsum erat justo voluptua. Nonumy.
									</li>
								  </ul> 
							</div>
						</div>
					</div>
					<div class="tab-pane fade" id="tab-pane-3">
						<div class="row">
							<div class="col-md-6">
								<h4 class="mb-4">1 review for "Product Name"</h4>
								<div class="media mb-4">
									<img src="img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
									<div class="media-body">
										<h6>John Doe<small> - <i>01 Jan 2045</i></small></h6>
										<div class="text-primary mb-2">
											<i class="fas fa-star"></i>
											<i class="fas fa-star"></i>
											<i class="fas fa-star"></i>
											<i class="fas fa-star-half-alt"></i>
											<i class="far fa-star"></i>
										</div>
										<p>Diam amet duo labore stet elitr ea clita ipsum, tempor labore accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed eirmod ipsum.</p>
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<h4 class="mb-4">Leave a review</h4>
								<small>Your email address will not be published. Required fields are marked *</small>
								<div class="d-flex my-3">
									<p class="mb-0 mr-2">Your Rating * :</p>
									<div class="text-primary">
										<i class="far fa-star"></i>
										<i class="far fa-star"></i>
										<i class="far fa-star"></i>
										<i class="far fa-star"></i>
										<i class="far fa-star"></i>
									</div>
								</div>
								<form>
									<div class="form-group">
										<label for="message">Your Review *</label>
										<textarea id="message" cols="30" rows="5" class="form-control"></textarea>
									</div>
									<div class="form-group">
										<label for="name">Your Name *</label>
										<input type="text" class="form-control" id="name">
									</div>
									<div class="form-group">
										<label for="email">Your Email *</label>
										<input type="email" class="form-control" id="email">
									</div>
									<div class="form-group mb-0">
										<input type="submit" value="Leave Your Review" class="btn btn-primary px-3">
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Shop Detail End -->


    <!-- aleartyfy js -->
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <script>
      alertify.set('notifier','position', 'top-right');

      {% for msg in messages %}
          alertify.success('{{ msg }}');
      {% endfor %}
    </script>

<!--image zoom-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        var zoomFactor = 1.8;

        $(".image-zoom-container").mousemove(function (event) {
            var $img = $(this).find("img");
            var imageWidth = $img.width();
            var imageHeight = $img.height();

            var offsetX = event.offsetX;
            var offsetY = event.offsetY;

            var translateX = (imageWidth * zoomFactor - imageWidth) / 2 - offsetX * (zoomFactor - 1);
            var translateY = (imageHeight * zoomFactor - imageHeight) / 2 - offsetY * (zoomFactor - 1);

            $img.css({
                transform: "scale(" + zoomFactor + ") translate(" + translateX + "px, " + translateY + "px)"
            });
        });

        $(".image-zoom-container").mouseleave(function () {
            $(this).find("img").css({
                transform: "scale(1) translate(0, 0)"
            });
        });
    });
</script>

	<!--=================================================================-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

		$(document).ready(function(){

		var quantitiy=0;
		   $('.quantity-right-plus').click(function(e){
		        
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		            
		            $('#quantity').val(quantity + 1);

		          
		            // Increment
		        
		    });

		     $('.quantity-left-minus').click(function(e){
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		      
		            // Increment
		            if(quantity>0){
		            $('#quantity').val(quantity - 1);
		            }
		    });
		    
		});
	</script>
	
	<script>
		$(document).ready(function() {
			$('#colour-select').change(function() {
				var selectedColourId = $(this).val();
				var selectedImage = $('option:selected', this).data('image');
		
				// Update the hidden input field value with the selected color ID
				$('#selected-colour-id').val(selectedColourId);
		
				// Perform other AJAX requests or operations if needed
		
				// Update the product image with the selected color's image
				$('#product-image').attr('src', selectedImage);
			});
		});
		</script>
		

	{% comment %} <script>
		$(document).ready(function() {
			$('#colour-select').change(function() {
				var selectedColourId = $(this).val();
				var selectedImage = $('option:selected', this).data('image');
		
				// Perform other AJAX requests or operations if needed
		
				// Update the product image with the selected color's image
				$('#product-image').attr('src', selectedImage);
			});
		});
		</script>
		 {% endcomment %}

	{% comment %} <script>
		$(document).ready(function() {
			console.log("heloooooooooooooooooooooooooooooooooo")
			$('#colour-select').change(function() {
			  var selectedColourId = $(this).val();
			  console.log(selectedColourId)
			$('#cid').text(selectedColourId)
			  // Perform an AJAX request to fetch the details of the selected variant
			  // Replace the URL with the actual endpoint that returns the variant details



			  $.ajax({
				url: '/get-colour-details',
				type: 'GET',
				data: { colourId: selectedColourId },
		
				success: function(response)
				 {
				  // Update the product details on the page
				  var productImage = response.variant_image;
					  var colourName = response.colour_name;
					  var colourStock = response.colour_stock;
					  var colourStatus = response.colour_status;
					  var stockStatus = response.stock_status;

					  var stockMessage = stockStatus ? '' : 'Out of Stock';
					  var stockColor = stockStatus ? 'text-success' : 'text-danger';
					  $('#stock-status').html('<h3 class="' + stockColor + '">' + stockMessage + '</h3>');
  
					  // Toggle visibility of Add to Cart button
					  if (stockStatus) {
						  $('#add-to-cart-btn').show();
					  } else {
						  $('#add-to-cart-btn').hide();
					  }
					  
			   console.log(colourStock,'item stock')
		
				  // Update the image source and price text
				  $('#product-image').attr('src', productImage);
				  $('#colour-stock').text(colourStock + '  Colours available'); // Make sure to include the text "pieces available"
					},
					error: function(xhr, status, error) {
					  // Handle error response if needed
					}
				  });
				});
			  }
			  );

	</script> {% endcomment %}



  </body>
{% endblock %}
</html>



   		